# نظام قاعدة المعرفة للذكاء الاصطناعي

## نظرة عامة

يوفر هذا النظام قاعدة معرفة متكاملة مع خدمة الذكاء الاصطناعي (OpenAI) لتحسين الردود على استفسارات العملاء. يستخدم النظام آلية بحث ذكية تمكن الذكاء الاصطناعي من فهم سؤال العميل وإعادة صياغته لتحسين نتائج البحث.

## المكونات الرئيسية

1. **قاعدة المعرفة (AIKnowledgeBase)**
   - نموذج بيانات لتخزين المعلومات المهيكلة
   - واجهة مستخدم لإدارة المعلومات (إضافة، تعديل، حذف)
   - إمكانية تحديد أولويات وتصنيفات للمعلومات

2. **خدمة البحث الذكي (aiKnowledgeService)**
   - تحليل استفسارات العملاء باستخدام OpenAI
   - إعادة صياغة الأسئلة للتعامل مع اللهجات المختلفة
   - استخراج الكلمات المفتاحية وتحديد التصنيفات المناسبة

3. **تكامل الذكاء الاصطناعي (chatGptService)**
   - معالجة المحادثات مع العملاء
   - إثراء سياق المحادثة بالمعلومات ذات الصلة
   - دعم الوسائط المتعددة (صور، صوتيات)

## آلية البحث الذكي

تعتمد آلية البحث الذكي على الخطوات التالية:

1. **تحليل السؤال**: يتم تحليل سؤال العميل باستخدام OpenAI لفهمه بغض النظر عن اللهجة أو طريقة الصياغة
2. **إعادة الصياغة**: يتم إعادة صياغة السؤال باللغة العربية الفصحى لتحسين نتائج البحث
3. **استخراج الكلمات المفتاحية**: يتم تحديد 4-6 كلمات مفتاحية أساسية في السؤال
4. **تحديد التصنيف**: يتم تحديد التصنيف الأنسب للسؤال
5. **بحث متعدد المسارات**: يتم إجراء بحث باستخدام الصياغة الجديدة والكلمات المفتاحية والتصنيف
6. **دمج النتائج**: يتم دمج نتائج جميع مسارات البحث وترتيبها حسب الأولوية

## مزايا النظام الجديد

- **فهم أفضل للهجات**: القدرة على فهم الأسئلة بمختلف اللهجات وأساليب الصياغة
- **نتائج أكثر دقة**: تحسين دقة نتائج البحث من خلال فهم المقصود وليس النص الحرفي
- **مرونة في التصنيف**: القدرة على تحديد التصنيف المناسب حتى مع عدم ذكره صراحة
- **تجربة مستخدم أفضل**: ردود أكثر دقة وملاءمة لاستفسارات العملاء

## خطوات الاستخدام

1. إضافة معلومات إلى قاعدة المعرفة من خلال واجهة `ai_knowledge_base.ejs`
2. تحديد الكلمات المفتاحية والتصنيفات المناسبة
3. تعيين مستوى الأولوية للمعلومات (1-10)
4. سيقوم النظام تلقائيًا باستخدام هذه المعلومات لإثراء ردود الذكاء الاصطناعي

## التحديثات المستقبلية المقترحة

- تحسين خوارزمية الترتيب لنتائج البحث
- إضافة دعم للبحث الدلالي (Semantic Search)
- إمكانية تدريب نموذج خاص للبحث في قاعدة المعرفة
- إضافة ميزة التعلم التلقائي من ردود العملاء والمندوبين